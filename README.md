# JupiterOne Starbase

Starbase by JupiterOne is an orchestrator application for running graph
ingestion projects and optionally pushing them to a storage endpoint.

## Development

### Prerequisites

1. Install [Node.js](https://nodejs.org/) using the
   [installer](https://nodejs.org/en/download/) or a version manager such as
   [nvm](https://github.com/nvm-sh/nvm) or [fnm](https://github.com/Schniz/fnm).
2. Install [`yarn`](https://yarnpkg.com/getting-started/install).
3. Install dependencies with `yarn install`.
4. Register an account in the system each integration targets for ingestion and
   obtain API credentials.
5. `cp config.yaml.example config.yaml` and add necessary values for runtime
   configuration of each integration as well as any storage endpoint.

   When each integration executes, it needs API credentials and any other
   configuration parameters necessary for its work (provider API credentials,
   data ingestion parameters, etc.). The names of these parameters are defined
   by the `IntegrationInstanceConfigFieldMap`in `src/config.ts` of each
   integration. When the integration is executed, values for these parameters
   are read from Node's `process.env` by converting config field names to
   constant case. For example, `clientId` is read from `process.env.CLIENT_ID`.

   The `.env` file is generated by Starbase at runtime based on the values
   provided for each integration in the `config.yaml` file. For each
   integration, the `.env` file is then loaded into `process.env` before the
   integration code is executed. `.gitignore` is configured to to avoid
   commiting the `config.yaml` and .`.env` files.

### Running Starbase

1. Perform `yarn starbase setup` to perform a clone or update of all integrations
   listed in the `config.yaml` file as well as install all dependencies for each
   integration.
2. Perform `yarn starbase run` to collect data for each listed integration and
   then push collected data if a storage endpoint has been listed in
   `config.yaml`.

For additional information on using Neo4j as a storage endpoint, please see the
[README.md](docker/README.md) provided.

### Making Contributions

Start by taking a look at the source code. Each integration is basically a set
of functions called steps, each of which ingests a collection of resources and
relationships. The goal is to limit each step to as few resource types as
possible so that should the ingestion of one type of data fail, it does not
necessarily prevent the ingestion of other, unrelated data. That should be
enough information to allow you to get started coding!

See the
[SDK development documentation](https://github.com/JupiterOne/sdk/blob/main/docs/integrations/development.md)
for a deep dive into the mechanics of how integrations work.

See the [docs/development.md](docs/development.md) in any of the existing
integrations for any additional details about developing other integrations.

### Changelog

The history of this project's development can be viewed at
[CHANGELOG.md](CHANGELOG.md).
